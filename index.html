<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulateur de Reprise - Pamko</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 0; background-color: #f7f8fa; color: #000; }
        main { display: flex; flex-direction: row; min-height: 100vh; }
        .left-section { width: 40%; background-color: #f7f8fa; display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 30px; }
        .left-section img { width: 70%; height: auto; margin-bottom: 30px; }
        .device-info { display: none; background-color: #fff; padding: 15px; border-radius: 10px; width: 80%; text-align: center; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); font-weight: bold; font-size: 18px; }
        .right-section { width: 60%; padding: 50px; background-color: #fff; border-radius: 30px 0 0 30px; box-shadow: -5px 0 15px rgba(0, 0, 0, 0.05); }
        .progress-bar-container { width: 100%; margin-bottom: 30px; text-align: center; }
        .progress-bar-text { font-weight: bold; margin-bottom: 10px; font-size: 18px; }
        .progress-bar-background { width: 100%; height: 3px; background-color: #e0e0e0; position: relative; border-radius: 2px; }
        .progress-bar-fill { width: 0%; height: 100%; background-color: #000; border-radius: 2px; transition: width 0.4s ease; }
        .form-container, .result-container { background-color: #fff; padding: 30px; border-radius: 10px; display: none; }
        .form-container.active, .result-container.active { display: block; }
        .form-group { margin-bottom: 25px; }
        .option-box { border: 1px solid #dcdcdc; border-radius: 10px; padding: 20px; margin-bottom: 20px; cursor: pointer; display: flex; align-items: flex-start; }
        .option-box input { margin-right: 15px; }
        .option-box:hover, .option-box.selected { border-color: #000; background-color: #f0f0f0; }
        select, button { width: 100%; padding: 15px; border: 1px solid #dcdcdc; border-radius: 10px; background-color: #f7f8fa; color: #000; font-size: 16px; }
        select:focus, button:focus { outline: none; border-color: #000; }
        button { background-color: #000; color: #fff; cursor: pointer; transition: background-color 0.3s ease; }
        button:hover { background-color: #333; }
        @media (max-width: 992px) {
            main { flex-direction: column; }
            .left-section, .right-section { width: 100%; }
            .right-section { border-radius: 0; }
        }
    </style>
</head>
<body>
    <main>
        <div class="left-section">
            <div class="device-info" id="device-info"></div>
            <img src="https://zupimages.net/up/25/08/h4r9.png" alt="Illustration Smartphone et Argent">
        </div>
        <div class="right-section">
            <div class="progress-bar-container">
                <div class="progress-bar-text" id="progress-bar-text">1/4 Votre appareil</div>
                <div class="progress-bar-background">
                    <div class="progress-bar-fill" id="progress-bar"></div>
                </div>
            </div>
            <div class="form-container active" id="step1">
                <h2>Quelle est la marque de votre smartphone ?</h2>
                <div class="form-group">
                    <label>Marque :</label>
                    <select id="brand" onchange="updateModelOptions()"></select>
                </div>
                <h3>Quel est le mod√®le exact de votre appareil ?</h3>
                <div class="form-group">
                    <select id="model" onchange="updateStorageOptions()"></select>
                </div>
                <div class="form-group" id="storage-group" style="display:none;">
                    <h3>Quelle est sa capacit√© ?</h3>
                    <select id="storage"></select>
                </div>
                <button onclick="validateStep1()">Suivant</button>
            </div>

            <div class="form-container" id="step2">
                <h2>Quel est l'√©tat de l'√©cran ?</h2>
                <div id="screenConditionContainer"></div>
                <button onclick="validateStep2()">Suivant</button>
            </div>

            <div class="form-container" id="step3">
                <h2>Quel est l'√©tat de la coque et du contour ?</h2>
                <div id="bodyConditionContainer"></div>
                <button onclick="validateStep3()">Suivant</button>
            </div>

            <div class="form-container" id="step4">
                <h2>Votre appareil est-il fonctionnel ?</h2>
                <div class="form-group">
                    <label><input type="radio" name="functional" value="Oui"> Oui</label>
                    <label><input type="radio" name="functional" value="Non"> Non</label>
                </div>
                <button onclick="calculateEstimate()">Voir l'estimation</button>
            </div>

            <div class="result-container" id="result-container">
                <h2>Notre offre de reprise</h2>
                <p id="result-text"></p>
            </div>
        </div>
    </main>

    <script>
        const priceConfig = {
            "Apple": {"iPhone 13": {storage: {128: 700, 256: 800, 512: 900}}},
            "Samsung": {"Galaxy S21": {storage: {128: 600, 256: 700}}}
        };

        const screenConditions = [
            {label: "Cass√©", desc: "√âcran fissur√© ou non fonctionnel."},
            {label: "√âtat correct", desc: "Traces d‚Äôusure, √©cran fonctionnel."},
            {label: "Tr√®s bon √©tat", desc: "Micro-rayures l√©g√®res."},
            {label: "Parfait √©tat", desc: "Aucune rayure visible."}
        ];

        const bodyConditions = [
            {label: "Cass√©s", desc: "Coque fissur√©e ou cass√©e."},
            {label: "√âtat correct", desc: "Traces d‚Äôusure ou petits impacts."},
            {label: "Tr√®s bon √©tat", desc: "Micro-rayures invisibles."},
            {label: "Parfait √©tat", desc: "Aucune rayure."}
        ];

        function populateOptions(selectId, options) {
            const select = document.getElementById(selectId);
            select.innerHTML = '<option value="">S√©lectionnez une option</option>';
            options.forEach(key => {
                const option = document.createElement('option');
                option.value = key;
                option.textContent = key;
                select.appendChild(option);
            });
        }

        function updateModelOptions() {
            const brand = document.getElementById('brand').value;
            if (priceConfig[brand]) {
                populateOptions('model', Object.keys(priceConfig[brand]));
                document.getElementById('model').disabled = false;
            }
        }

        function updateStorageOptions() {
            const brand = document.getElementById('brand').value;
            const model = document.getElementById('model').value;
            if (priceConfig[brand] && priceConfig[brand][model]) {
                populateOptions('storage', Object.keys(priceConfig[brand][model].storage));
                document.getElementById('storage-group').style.display = 'block';
            }
        }

        function validateStep1() {
            const brand = document.getElementById('brand').value;
            const model = document.getElementById('model').value;
            const storage = document.getElementById('storage').value;
            if (brand && model && storage) {
                goToStep(2);
                createOptionBoxes('screenConditionContainer', screenConditions);
            } else {
                alert("Veuillez remplir toutes les informations.");
            }
        }

        function createOptionBoxes(containerId, options) {
            const container = document.getElementById(containerId);
            container.innerHTML = "";
            options.forEach((opt) => {
                const div = document.createElement('div');
                div.className = 'option-box';
                div.innerHTML = `<input type="radio" name="${containerId}" value="${opt.label}"> <div><strong>${opt.label}</strong><p>${opt.desc}</p></div>`;
                div.onclick = () => selectOption(div);
                container.appendChild(div);
            });
        }

        function selectOption(element) {
            element.parentElement.querySelectorAll('.option-box').forEach(el => el.classList.remove('selected'));
            element.classList.add('selected');
            element.querySelector('input').checked = true;
        }

        function validateStep2() {
            if (document.querySelector('input[name="screenConditionContainer"]:checked')) {
                goToStep(3);
                createOptionBoxes('bodyConditionContainer', bodyConditions);
            } else {
                alert("Veuillez s√©lectionner l'√©tat de l'√©cran.");
            }
        }

        function validateStep3() {
            if (document.querySelector('input[name="bodyConditionContainer"]:checked')) {
                goToStep(4);
            } else {
                alert("Veuillez s√©lectionner l'√©tat de la coque.");
            }
        }

        function calculateEstimate() {
            const brand = document.getElementById('brand').value;
            const model = document.getElementById('model').value;
            const storage = document.getElementById('storage').value;
            const functional = document.querySelector('input[name="functional"]:checked')?.value || "Non";
            let basePrice = priceConfig[brand]?.[model]?.storage?.[storage] || 0;
            if (functional === "Non") basePrice *= 0.5;

            document.getElementById('result-text').textContent = `üéâ Offre estim√©e : ${basePrice} ‚Ç¨ pour votre ${model} ${storage} Go.`;
            document.getElementById('result-container').classList.add('active');
            document.querySelectorAll('.form-container').forEach(div => div.classList.remove('active'));
        }

        function goToStep(step) {
            document.querySelectorAll('.form-container').forEach(div => div.classList.remove('active'));
            const stepElement = document.getElementById('step' + step);
            if (stepElement) {
                stepElement.classList.add('active');
                updateProgressBar(step);
            }
        }

        function updateProgressBar(step) {
            const progressBar = document.getElementById('progress-bar');
            const progressText = document.getElementById('progress-bar-text');
            const percentage = (step / 4) * 100;
            progressBar.style.width = percentage + '%';
            const stepLabels = ["Votre appareil", "√âtat de l'√©cran", "√âtat de la coque", "Fonctionnalit√©"];
            progressText.textContent = `${step}/4 ${stepLabels[step - 1]}`;
        }

        document.addEventListener('DOMContentLoaded', function() {
            populateOptions('brand', Object.keys(priceConfig));
            document.getElementById('brand').addEventListener('change', updateModelOptions);
            document.getElementById('model').addEventListener('change', updateStorageOptions);
        });
    </script>
</body>
</html>
