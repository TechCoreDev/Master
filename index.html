<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulateur de Reprise - Pamko</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 0; background-color: #f7f8fa; color: #000; }
        main { display: flex; flex-direction: row; min-height: 100vh; }
        .left-section { width: 40%; background-color: #f7f8fa; display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 30px; }
        .left-section img { width: 70%; height: auto; margin-bottom: 30px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); }
        .device-info { display: none; background-color: #fff; padding: 15px; border-radius: 10px; width: 80%; text-align: center; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); font-weight: bold; font-size: 18px; }
        .right-section { width: 60%; padding: 50px; background-color: #fff; border-radius: 30px 0 0 30px; box-shadow: -5px 0 15px rgba(0, 0, 0, 0.05); }
        .progress-bar-container { width: 100%; margin-bottom: 30px; text-align: center; }
        .progress-bar-text { font-weight: bold; margin-bottom: 10px; font-size: 18px; }
        .progress-bar-background { width: 100%; height: 3px; background-color: #e0e0e0; position: relative; border-radius: 2px; }
        .progress-bar-fill { width: 0%; height: 100%; background-color: #000; border-radius: 2px; transition: width 0.4s ease; }
        .form-container, .result-container { background-color: #fff; padding: 30px; border-radius: 10px; display: none; }
        .form-container.active, .result-container.active { display: block; }
        .form-group { margin-bottom: 25px; }
        .option-box { border: 1px solid #dcdcdc; border-radius: 10px; padding: 20px; margin-bottom: 20px; cursor: pointer; text-align: center; font-size: 18px; font-weight: bold; }
        .option-box.selected { border-color: #000; background-color: #f0f0f0; }
        select, button { width: 100%; padding: 15px; border: 1px solid #dcdcdc; border-radius: 10px; background-color: #f7f8fa; color: #000; font-size: 16px; }
        select:focus, button:focus { outline: none; border-color: #000; }
        button { background-color: #000; color: #fff; cursor: pointer; transition: background-color 0.3s ease; }
        button:hover { background-color: #333; }
        .description { font-size: 14px; color: #555; margin-bottom: 20px; }
        @media (max-width: 992px) {
            main { flex-direction: column; }
            .left-section, .right-section { width: 100%; }
            .right-section { border-radius: 0; }
        }
    </style>
</head>
<body>
    <main>
        <div class="left-section">
            <div class="device-info" id="device-info"></div>
            <img id="device-image" src="https://zupimages.net/up/25/08/h4r9.png" alt="Illustration Smartphone et Argent">
        </div>
        <div class="right-section">
            <div class="progress-bar-container">
                <div class="progress-bar-text" id="progress-bar-text">1/5 Votre appareil</div>
                <div class="progress-bar-background">
                    <div class="progress-bar-fill" id="progress-bar"></div>
                </div>
            </div>

            <div class="form-container active" id="step1">
                <h2>Quelle est la marque de votre smartphone ?</h2>
                <div class="form-group">
                    <label>Marque :</label>
                    <select id="brand"></select>
                </div>
                <h3>Quel est le mod√®le exact de votre appareil ?</h3>
                <div class="form-group">
                    <select id="model"></select>
                </div>
                <div class="form-group" id="storage-group" style="display:none;">
                    <h3>Quelle est sa capacit√© ?</h3>
                    <select id="storage"></select>
                </div>
                <button onclick="validateStep(2)">Suivant</button>
            </div>

            <div class="form-container" id="step2">
                <h2>Quel est l'√©tat de l'√©cran ?</h2>
                <div class="form-group" id="screen-conditions"></div>
                <button onclick="validateStep(3)">Suivant</button>
            </div>

            <div class="form-container" id="step3">
                <h2>Quel est l'√©tat de la coque et du contour ?</h2>
                <div class="form-group" id="body-conditions"></div>
                <button onclick="validateStep(4)">Suivant</button>
            </div>

            <div class="form-container" id="step4">
                <h2>Capacit√© maximale de la batterie</h2>
                <div class="form-group" id="battery-capacity"></div>
                <button onclick="validateStep(5)">Suivant</button>
            </div>

            <div class="form-container" id="step5">
                <h2>Votre appareil est-il fonctionnel ?</h2>
                <div class="form-group" id="functionality-status"></div>
                <button onclick="calculateEstimate()">Voir l'estimation</button>
            </div>

            <div class="result-container" id="result-container">
                <h2>Notre offre de reprise</h2>
                <p id="result-text"></p>
            </div>
        </div>
    </main>

    <script>
        const priceConfig = {
            "Apple": {
                "iPhone 13": {
                    image: "https://zupimages.net/up/25/08/st84.jpg",
                    storage: {128: 700, 256: 800, 512: 900}
                }
            }
        };

        const screenConditions = ["Cass√©", "√âtat correct", "Tr√®s bon √©tat", "Parfait √©tat"];
        const bodyConditions = ["Cass√©s", "√âtat correct", "Tr√®s bon √©tat", "Parfait √©tat"];
        const batteryOptions = ["Plus de 85%", "Moins de 85%"];
        const functionalityOptions = ["Fonctionnel", "Non fonctionnel"];

        function populateOptions(selectId, options) {
            const select = document.getElementById(selectId);
            select.innerHTML = '<option value="">S√©lectionnez une option</option>';
            options.forEach(key => {
                const option = document.createElement('option');
                option.value = key;
                option.textContent = key;
                select.appendChild(option);
            });
        }

        function validateStep(step) {
            const currentStep = step - 1;
            document.getElementById(`step${currentStep}`).classList.remove('active');
            document.getElementById(`step${step}`).classList.add('active');
            updateProgressBar(step);
            if (step === 2) populateConditionOptions('screen-conditions', screenConditions);
            if (step === 3) populateConditionOptions('body-conditions', bodyConditions);
            if (step === 4) populateConditionOptions('battery-capacity', batteryOptions);
            if (step === 5) populateConditionOptions('functionality-status', functionalityOptions);
        }

        function populateConditionOptions(containerId, options) {
            const container = document.getElementById(containerId);
            container.innerHTML = "";
            options.forEach(option => {
                const div = document.createElement('div');
                div.className = 'option-box';
                div.textContent = option;
                div.onclick = () => {
                    document.querySelectorAll(`#${containerId} .option-box`).forEach(el => el.classList.remove('selected'));
                    div.classList.add('selected');
                };
                container.appendChild(div);
            });
        }

        function updateProgressBar(step) {
            const progressBar = document.getElementById('progress-bar');
            const progressText = document.getElementById('progress-bar-text');
            const percentage = (step / 5) * 100;
            const stepLabels = ["Votre appareil", "√âtat de l'√©cran", "√âtat de la coque", "Capacit√© batterie", "Fonctionnalit√©"];
            progressBar.style.width = percentage + '%';
            progressText.textContent = `${step}/5 ${stepLabels[step - 1]}`;
        }

        function getSelectedOption(containerId) {
            const selected = document.querySelector(`#${containerId} .option-box.selected`);
            return selected ? selected.textContent : null;
        }

        function calculateEstimate() {
            const brand = document.getElementById('brand').value;
            const model = document.getElementById('model').value;
            const storage = document.getElementById('storage').value;
            const screen = getSelectedOption('screen-conditions');
            const body = getSelectedOption('body-conditions');
            const battery = getSelectedOption('battery-capacity');
            const functionality = getSelectedOption('functionality-status');

            let basePrice = priceConfig[brand]?.[model]?.storage?.[storage] || 0;

            if (basePrice === 0) {
                document.getElementById('result-text').textContent = "Votre appareil sera repris pour recyclage. ‚ôªÔ∏è";
            } else {
                basePrice -= (screen === "Cass√©" ? 200 : 0);
                basePrice -= (body === "Cass√©s" ? 150 : 0);
                basePrice -= (battery === "Moins de 85%" ? 100 : 0);
                basePrice -= (functionality === "Non fonctionnel" ? 300 : 0);
                basePrice = basePrice < 0 ? 0 : basePrice;
                document.getElementById('result-text').textContent = `üéâ Offre finale : ${basePrice}‚Ç¨ pour votre ${brand} ${model} ${storage} Go.`;
            }
            document.querySelectorAll('.form-container').forEach(div => div.classList.remove('active'));
            document.getElementById('result-container').classList.add('active');
        }

        document.addEventListener('DOMContentLoaded', function() {
            populateOptions('brand', Object.keys(priceConfig));
            document.getElementById('brand').addEventListener('change', updateModelOptions);
            document.getElementById('model').addEventListener('change', updateStorageAndImage);
        });

        function updateModelOptions() {
            const brand = document.getElementById('brand').value;
            if (priceConfig[brand]) {
                populateOptions('model', Object.keys(priceConfig[brand]));
                document.getElementById('model').disabled = false;
            }
            document.getElementById('device-image').src = "https://zupimages.net/up/25/08/h4r9.png";
        }

        function updateStorageAndImage() {
            const brand = document.getElementById('brand').value;
            const model = document.getElementById('model').value;
            if (priceConfig[brand] && priceConfig[brand][model]) {
                populateOptions('storage', Object.keys(priceConfig[brand][model].storage));
                document.getElementById('storage-group').style.display = 'block';
                document.getElementById('device-image').src = priceConfig[brand][model].image;
            }
        }
    </script>
</body>
</html>
